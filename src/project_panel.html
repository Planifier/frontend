<!DOCTYPE html>
<html
	lang="en"
	data-theme="corporate"
>
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0"
		/>
		<title>Project name 1</title>
		<link
			href="./output.css"
			rel="stylesheet"
		/>
	</head>
	<body>
		<nav class="w-full bg-base-200 flex items-center justify-center">
			<ul
				class="w-10/12 sm:w-11/12 menu rounded-box menu-horizontal items-center justify-center lg:justify-start"
			>
				<li class="bg-base-300">
					<a>
						<svg
							class="fill-base-content"
							width="20px"
							height="20px"
							viewBox="0 0 24 24"
							xmlns="http://www.w3.org/2000/svg"
							data-name="Layer 1"
						>
							<path
								d="M18,10H14V3a1,1,0,0,0-1-1H8A1,1,0,0,0,7,3V8H3A1,1,0,0,0,2,9V21a1,1,0,0,0,1,1H18a1,1,0,0,0,1-1V11A1,1,0,0,0,18,10ZM7,20H4V10H7Zm5,0H9V4h3Zm5,0H14V12h3ZM21,4H20V3a1,1,0,0,0-2,0V4H17a1,1,0,0,0,0,2h1V7a1,1,0,0,0,2,0V6h1a1,1,0,0,0,0-2Z"
							/>
						</svg>
						Panel
					</a>
				</li>
				<li>
					<a>
						<svg
							class="fill-base-content"
							height="20px"
							width="20px"
							version="1.1"
							id="_x32_"
							xmlns="http://www.w3.org/2000/svg"
							xmlns:xlink="http://www.w3.org/1999/xlink"
							viewBox="0 0 512 512"
							xml:space="preserve"
						>
							<g>
								<path
									class="st0"
									d="M256.495,96.434c26.632,0,48.213-21.597,48.213-48.205C304.708,21.58,283.128,0,256.495,0
		c-26.65,0-48.222,21.58-48.222,48.229C208.274,74.837,229.846,96.434,256.495,96.434z"
								/>
								<path
									class="st0"
									d="M298.267,119.279h-42.271h-42.271c-23.362,0-48.779,25.418-48.779,48.788v162.058
		c0,11.685,9.463,21.156,21.148,21.156c5.743,0,0,0,14.756,0l8.048,138.206c0,12.434,10.078,22.513,22.513,22.513
		c5.244,0,14.923,0,24.585,0c9.671,0,19.35,0,24.593,0c12.434,0,22.513-10.078,22.513-22.513l8.04-138.206
		c14.764,0,9.013,0,14.764,0c11.676,0,21.148-9.471,21.148-21.156V168.067C347.054,144.697,321.636,119.279,298.267,119.279z"
								/>
								<path
									class="st0"
									d="M104.141,149.083c23.262,0,42.105-18.85,42.105-42.104c0-23.262-18.843-42.112-42.105-42.112
		c-23.27,0-42.104,18.851-42.104,42.112C62.037,130.232,80.871,149.083,104.141,149.083z"
								/>
								<path
									class="st0"
									d="M408.716,149.083c23.27,0,42.104-18.85,42.104-42.104c0-23.262-18.834-42.112-42.104-42.112
		c-23.253,0-42.104,18.851-42.104,42.112C366.612,130.232,385.463,149.083,408.716,149.083z"
								/>
								<path
									class="st0"
									d="M137.257,169.024h-33.548h-36.92c-20.398,0-42.595,22.213-42.595,42.612v141.526
		c0,10.212,8.264,18.476,18.468,18.476c5.018,0,0,0,12.884,0l7.024,120.704c0,10.852,8.805,19.658,19.666,19.658
		c4.577,0,13.024,0,21.473,0c8.439,0,16.895,0,21.472,0c10.861,0,19.666-8.805,19.666-19.658l7.016-120.704v-6.849
		c-8.98-8.856-14.606-21.082-14.606-34.664V169.024z"
								/>
								<path
									class="st0"
									d="M445.211,169.024h-36.928h-33.54v161.101c0,13.582-5.626,25.808-14.615,34.664v6.849l7.017,120.704
		c0,10.852,8.814,19.658,19.674,19.658c4.578,0,13.025,0,21.464,0c8.456,0,16.904,0,21.481,0c10.862,0,19.659-8.805,19.659-19.658
		l7.032-120.704c12.883,0,7.865,0,12.883,0c10.204,0,18.468-8.265,18.468-18.476V211.636
		C487.806,191.237,465.61,169.024,445.211,169.024z"
								/>
							</g>
						</svg>
						Team
					</a>
				</li>
				<li class="block md:hidden pl-1">
					<input
						type="checkbox"
						class="toggle"
						id="tasks_switch"
						onclick="saveViewPref()"
					/>
				</li>
			</ul>
			<dialog
				id="expense_panel"
				class="modal"
			>
				<div class="modal-box">
					<form method="dialog">
						<button
							class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2"
						>
							✕
						</button>
						<div class="flex items-center justify-center gap-5">
							<a
								id="budget_increase"
								title="+10"
								class="btn btn-square btn-success"
							>
								<!-- prettier-ignore -->
								<svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M4 12H20M12 4V20" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
							</a>
							<input
								type="number"
								class="font-mono px-2 py-1 bg-base-300 rounded-md text-3xl w-40 min-w-0"
								value="230.34"
								placeholder="230.34"
								id="budget_val"
							/>
							<a
								id="budget_spent"
								title="-10"
								class="btn btn-square btn-error"
							>
								<!-- prettier-ignore -->
								<svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M6 12L18 12" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
							</a>
						</div>
					</form>
				</div>
			</dialog>
			<span
				class="font-mono px-2 py-1 bg-base-300 rounded-md text-sm md:text-lg lg:text-3xl hover:cursor-pointer"
				onclick="expense_panel.showModal()"
				><span id="currency">$</span
				><span id="budget_display">230.45</span></span
			>
			<a
				class="w-2/12 sm:w-1/12 min-w-max flex items-center justify-center"
				href
				data-toggle-theme="business,corporate"
				data-act-class="ACTIVECLASS"
				><!-- prettier-ignore -->
				<svg
					class="opacity-75"
					version="1.0"
					id="Layer_1"
					xmlns="http://www.w3.org/2000/svg"
					xmlns:xlink="http://www.w3.org/1999/xlink"
					width="20px"
					height="20px"
					viewBox="0 0 64 64"
					enable-background="new 0 0 64 64"
					xml:space="preserve"
				>
					<g>
						<path
							class="fill-base-content"
							d="M32,0C18.745,0,8,10.746,8,24c0,9.843,5.928,18.297,14.406,22h19.188C50.072,42.297,56,33.843,56,24
                           C56,10.746,45.255,0,32,0z M41,26c-0.553,0-1-0.447-1-1c0-1.104-0.896-2-2-2s-2,0.896-2,2v19h-2V25c0-1.104-0.896-2-2-2
                           s-2,0.896-2,2v19h-2V25c0-1.104-0.896-2-2-2s-2,0.896-2,2c0,0.553-0.447,1-1,1s-1-0.447-1-1c0-2.209,1.791-4,4-4
                           c1.201,0,2.267,0.541,3,1.38c0.733-0.839,1.799-1.38,3-1.38s2.267,0.541,3,1.38c0.733-0.839,1.799-1.38,3-1.38c2.209,0,4,1.791,4,4
                           C42,25.553,41.553,26,41,26z M45,13c-0.742,0.742-1.687-0.313-1.687-0.313C40.418,9.791,36.418,8,32,8c-0.553,0-1-0.447-1-1
                           s0.447-1,1-1c4.971,0,9.471,2.015,12.729,5.271C44.729,11.271,45.742,12.258,45,13z"
						/>
						<path
							class="fill-base-content"
							d="M26,64h12c2.211,0,4-1.789,4-4H22C22,62.211,23.789,64,26,64z"
						/>
						<polygon
							class="fill-base-content"
							points="22,48.004 22,52 42,52 42,48.004 42,48 22,48 	"
						/>
						<rect
							x="22"
							y="54"
							class="fill-base-content"
							width="20"
							height="4"
						/>
					</g></svg>
			</a>
		</nav>
		<main class="join w-full justify-center">
			<div
				id="progress_tab"
				class="w-full h-dvh md:min-w-96 md:w-1/3"
			>
				<div class="grid bg-primary p-5">
					<p class="font-bold">65% cooked!</p>
					<progress
						class="progress"
						value="80"
						max="100"
					></progress>
				</div>
				<div>
					<ul class="grid items-center justify-center">
						<!-- ADD_NOTE notification component -->
						<li class="notification">
							<img
								class="mask mask-circle"
								src="https://picsum.photos/seed/59/32/32"
							/>
							<div>
								<p class="pr-2">
									<span class="font-bold link">Rouis Kale</span> Added a
									<span class="link">note</span> to task
									<span class="link">Create header</span>!
								</p>
								<p class="text-sm min-w-max opacity-75">2069-06-12 14:02:19</p>
							</div>
						</li>
						<!-- FINISH_TASK notification component -->
						<li class="milestone-notification">
							<img
								class="mask mask-circle"
								src="https://picsum.photos/seed/0/32/32"
							/>
							<div>
								<p class="pr-2">
									<span class="font-bold link">Jhon doe</span> Marked task
									<span class="link">Create header</span> as finished!
								</p>
								<p class="text-sm min-w-max opacity-75">2066-06-22 16:51:10</p>
							</div>
						</li>
						<!-- BUDGET_SPEND notification component -->
						<li class="expensive-notification">
							<img
								class="mask mask-circle"
								src="https://picsum.photos/seed/0/32/32"
							/>
							<div>
								<p class="pr-2">
									<span class="font-bold link">Jhon doe</span> Spent
									<span class="text-success">$50.6</span> from this project's
									budget on
									<span
										class="bg-warning-content px-1 py-0.5 rounded-md text-warning"
										>buying a cup of coffee</span
									>!
								</p>
								<p class="text-sm min-w-max opacity-75">2066-06-22 16:51:10</p>
							</div>
						</li>
						<!-- CREATE_TASK notification component -->
						<li class="notification">
							<img
								class="mask mask-circle"
								src="https://picsum.photos/seed/799/32/32"
							/>
							<div>
								<p class="pr-2">
									<span class="font-bold link">Invisibilities34</span> Created a
									task called <span class="link">Create footer</span>!
								</p>
								<p class="text-sm min-w-max opacity-75">2069-06-12 14:02:19</p>
							</div>
						</li>
					</ul>
				</div>
			</div>
			<div
				class="hidden md:inline divider-horizontal divider-secondary ml-0 bg-primary"
			></div>
			<div
				id="tasks_tab"
				class="hidden md:block bg-base-100 w-1/3 mt-5"
			>
				<div class="form-control w-max">
					<label class="label cursor-pointer gap-3">
						<span class="label-text font-bold">Hide finished tasks</span>
						<input
							type="checkbox"
							class="toggle"
						/>
					</label>
				</div>
				<dialog
					id="notes_of_task"
					class="modal"
				>
					<div class="modal-box w-fit min-w-fit rounded-none">
						<form method="dialog">
							<button
								class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2"
							>
								✕
							</button>
						</form>
						<textarea
							type="text"
							placeholder="Note a thing or two..."
							class="px-3 py-1 rounded-sm bg-transparent w-3/4 outline-none"
						></textarea>
						<ul
							class="*:flex *:gap-3 *:items-center *:bg-base-200 *:px-3 *:py-1 *:my-1 *:rounded-md"
						>
							<li>
								<p>
									Safety first! Always prioritize safety throughout your project
									to ensure a secure and enjoyable riding experience.
								</p>

								<p class="text-sm opacity-60">
									<span>Invisibilities34</span> @
									<span>2069-06-12 14:02:19</span>
								</p>
							</li>
							<li>
								<p>
									Research well: Explore components, materials, and techniques
									to craft a bicycle that fits your vision.
								</p>

								<p class="text-sm opacity-60">
									<span>Invisibilities34</span> @
									<span>2069-06-12 14:02:19</span>
								</p>
							</li>
							<li>
								<p>
									Enjoy the process: Building a bike is rewarding, so take your
									time and seek help if needed.
								</p>

								<p class="text-sm opacity-60">
									<span>Invisibilities34</span> @
									<span>2069-06-12 14:02:19</span>
								</p>
							</li>
							<li>
								<p>
									Details matter: Attention to alignment, bolt tightness, and
									cleanliness improves performance and longevity.
								</p>

								<p class="text-sm opacity-60">
									<span>Invisibilities34</span> @
									<span>2069-06-12 14:02:19</span>
								</p>
							</li>
						</ul>
					</div>
				</dialog>
				<ul
					id="tasks_list_display"
					class="steps steps-vertical w-max px-1"
				>
					<li
						class="task"
						id="add-task"
					>
						<input
							type="text"
							placeholder="Add a new task..."
							class="input input-bordered w-full max-w-xs bg-primary placeholder-white text-white rounded-md"
						/>
					</li>
				</ul>
			</div>
		</main>
	</body>
	<script src="https://cdn.jsdelivr.net/npm/theme-change@2.0.2/index.js"></script>
	<script src="bridge/bridge.js"></script>
	<script>
		function openNotesOfTask(taskEl) {
			notes_of_task.showModal();
		}
	</script>
	<script>
		const currencyEl = document.getElementById('currency');
		const budgetEl = document.getElementById('budget_display');
		const tasksListEl = document.getElementById('tasks_list_display');
		const unfinishedTask = function (name) {
			return '<li class="task" onclick="openNotesOfTask()">' + name + '</li>';
		};
		const finishedTask = function (name) {
			return (
				'<li class="finished-task" onclick="openNotesOfTask()">' +
				name +
				'</li>'
			);
		};

		let currentlySelectedProject = getCurrentlySelectedProject();

		let tasks = null;
		let budget = 0;
		let budgetCurrency = '$';

		getData(currentlySelectedProject).then((result) => {
			let projectInfo = JSON.parse(result);
			tasks = projectInfo['tasks'];
			budget = projectInfo['budget'];
			budgetCurrency = projectInfo['currency'];

			updateDisplayedVals();
		});

		function updateDisplayedVals() {
			currencyEl.textContent = budgetCurrency;
			budgetEl.textContent = budget;
			for (let i = 0; i < tasks.length; i++) {
				const task = tasks[i];
				tasksListEl.appendChild(unfinishedTask(task));
			}
		}
	</script>

	<script>
		const budgetIncreaseEl = document.getElementById('budget_increase');
		const budgetSpentEl = document.getElementById('budget_spent');
		const budgetValEl = document.getElementById('budget_val');
		const budgetDisplayEl = document.getElementById('budget_display');
		const expensePanelEl = document.getElementById('expense_panel');

		budgetIncreaseEl.addEventListener('click', (event) => {
			budgetValEl.value = (Number(budgetValEl.value) + 10).toFixed(2);
			budgetDisplayEl.textContent = budgetValEl.value;
		});
		budgetSpentEl.addEventListener('click', (event) => {
			budgetValEl.value = (Number(budgetValEl.value) - 10).toFixed(2);
			budgetDisplayEl.textContent = budgetValEl.value;
		});

		budgetValEl.addEventListener(
			'change',
			(event) => (budgetDisplayEl.textContent = budgetValEl.value)
		);

		expensePanelEl.addEventListener('close', (event) => {
			let newBudget = Number(budgetDisplayEl.textContent).toFixed(2);
			setBudget(currentlySelectedProject, budgetCurrency, newBudget).then(
				(result) => updateDisplayedVals()
			);
		});
	</script>
	<style>
		#tasks_tab:has(input:checked) {
			& .finished-task,
			#add-task {
				display: none;
			}
		}
		@media (max-width: 768px) {
			body:has(#tasks_switch:checked) {
				& #progress_tab {
					display: none;
				}

				& #tasks_tab {
					display: block;
					width: 100%;
					margin-left: 1rem;
				}
			}
		}
	</style>
	<script>
		function loadViewPref() {
			var checked = JSON.parse(localStorage.getItem('tasks_switch'));
			document.getElementById('tasks_switch').checked = checked;
		}
		function saveViewPref() {
			var checkbox = document.getElementById('tasks_switch');
			localStorage.setItem('tasks_switch', checkbox.checked);
		}

		loadViewPref();
	</script>
</html>
